# Cервис «Обработчик изображений»

[__Установка / Окружение__](install.md)

[__Описание REST API__](api.md)


Сервис состоит публичного  REST  API. Обработка изображений происходит с помощью единственного метода.

Через REST  API   также осуществляется управление настройками сервиса, а именно:


**Метод обработки изображений:**

Принимает набор параметров, с помощью которых определяется, какие операции будут произведены над изображением

Возможные операции(приходят в сервис в виде констант):

* Watermark
* Resize
* Crop

**Описание параметров операций находится в services-stl/src/v2/Reference/Image/DefinitionImagePreviewParams.php**

**Примеры наборов параметров для операций:**

   1 Водный знак - watermark

    watermark - сам водный знак и параметры его нанесения
    operation[watermark] => [
        'position' => 'center' || 'split-rows'
    ]     
    
   2 Изменение размера - resize
    
    operation[resize] => [
        'width'  => 150
        'height' => 150
        'mode'   => 'resizeCanvas'||'fit'
        'anchor' => 'top'||'left'||'right'||'bottom'||'top-left'... 
    ]
  
  3 Кроп изображения - crop
  
    operation[crop] => [
        'width'  => 150
        'height' => 150
        'x'      => 10
        'y'      => 20
    ]
    
**Операции выполняются по приоритету, который задается в виде массива в сервисе. Изменить приоритеты операций можно изменив порядок констант в массиве.**
    
    /**
     * В данном случае порядок такой: ресайз, 
     * кроп, нанесения водяного знака 
     */  
    private $operationsPriorityList = [
        self::OPERATION_RESIZE,
        self::OPERATION_CROP,
        self::OPERATION_WATERMARK
    ];
   